{% extends "base.html" %}

{% block title %}{{ client.full_name }} - MectoFitness CRM{% endblock %}

{% block content %}
<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1 style="color: var(--primary-green);">{{ client.full_name }}</h1>
        <div class="action-buttons">
            <a href="{{ url_for('clients.edit_client', client_id=client.id) }}" class="btn btn-primary">Edit Client</a>
            <a href="{{ url_for('sessions.add_session') }}?client_id={{ client.id }}" class="btn btn-primary">Schedule Session</a>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2>Client Information</h2>
        </div>
        <div class="card-body">
            <p><strong>Email:</strong> {{ client.email }}</p>
            <p><strong>Phone:</strong> {{ client.phone or 'Not provided' }}</p>
            <p><strong>Fitness Goal:</strong> {{ client.fitness_goal or 'Not specified' }}</p>
            <p><strong>Fitness Level:</strong> {{ client.fitness_level or 'Not specified' }}</p>
            {% if client.medical_conditions %}
            <p><strong>Medical Conditions:</strong> {{ client.medical_conditions }}</p>
            {% endif %}
            {% if client.notes %}
            <p><strong>Notes:</strong> {{ client.notes }}</p>
            {% endif %}
        </div>
    </div>
    
    {% if programs %}
    <div class="card">
        <div class="card-header">
            <h2>Training Programs</h2>
        </div>
        <div class="card-body">
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Program Name</th>
                            <th>Goal</th>
                            <th>Duration</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for program in programs %}
                        <tr>
                            <td>{{ program.name }}</td>
                            <td>{{ program.goal or '-' }}</td>
                            <td>{{ program.duration_weeks }} weeks</td>
                            <td>{{ program.status|title }}</td>
                            <td>
                                <a href="{{ url_for('programs.view_program', program_id=program.id) }}" class="btn btn-secondary" style="padding: 0.5rem 1rem;">View</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% endif %}
    
    {% if sessions %}
    <div class="card">
        <div class="card-header">
            <h2>Recent Sessions</h2>
        </div>
        <div class="card-body">
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date & Time</th>
                            <th>Title</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for session in sessions %}
                        <tr>
                            <td>{{ session.scheduled_start.strftime('%Y-%m-%d %H:%M') }}</td>
                            <td>{{ session.title }}</td>
                            <td>{{ session.status|title }}</td>
                            <td>
                                <a href="{{ url_for('sessions.view_session', session_id=session.id) }}" class="btn btn-secondary" style="padding: 0.5rem 1rem;">View</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
