# Railway configuration for Frontend (Next.js Marketing Site)
# Deploy this as a separate Railway service
#
# Note: The Next.js app is configured for static export in next.config.mjs
# (output: 'export'). For server-side rendering, use next.config.production.mjs
# or modify next.config.mjs to:
#   - Remove: output: 'export'
#   - Optionally set: output: 'standalone'
#   - Change start command to: npm run nextjs:start

[build]
builder = "nixpacks"

[deploy]
# For static export, use a simple HTTP server
# For SSR, use: npm run nextjs:start
startCommand = "npx serve out -l 3000"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[nixpacks]
# Install Node.js only for frontend
nixPkgs = ["nodejs_20"]
nixLibs = []

[phases.install]
cmds = [
  "npm install",
  "npm install -g serve"
]

[phases.build]
cmds = [
  "npm run nextjs:build"
]

[start]
cmd = "npx serve out -l 3000"
