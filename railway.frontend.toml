# Railway configuration for Frontend (Next.js Marketing Site)
# Deploy this as a separate Railway service
#
# Note: The Next.js app is configured for static export (output: 'export')
# If you want server-side rendering, change next.config.mjs:
#   - Remove: output: 'export'
#   - Set: output: 'standalone' (optional, for optimization)

[build]
builder = "nixpacks"

[deploy]
# For static export, use a simple HTTP server
# For SSR, use: npm run nextjs:start
startCommand = "npx serve out -l 3000"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[nixpacks]
# Install Node.js only for frontend
nixPkgs = ["nodejs_20"]
nixLibs = []

[phases.install]
cmds = [
  "npm install",
  "npm install -g serve"
]

[phases.build]
cmds = [
  "npm run nextjs:build"
]

[start]
cmd = "npx serve out -l 3000"
